<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>src_p2pe_device_3</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#x2f;</directory>
    <parameters>
      <parameter>
        <name>dest_schema</name>
        <default_value>auto_billing_staging</default_value>
        <description>Destination Schema</description>
      </parameter>
      <parameter>
        <name>dest_table</name>
        <default_value>decryptx_device_day</default_value>
        <description>Destination Table</description>
      </parameter>
      <parameter>
        <name>dir_done</name>
        <default_value>&#x24;&#x7b;dir_done_default&#x7d;</default_value>
        <description/>
      </parameter>
      <parameter>
        <name>dir_source</name>
        <default_value>&#x24;&#x7b;dir_source_default&#x7d;</default_value>
        <description/>
      </parameter>
    </parameters>
    <log>
      <trans-log-table>
        <connection/>
        <schema/>
        <table/>
        <size_limit_lines/>
        <interval/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STATUS</id>
          <enabled>Y</enabled>
          <name>STATUS</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
          <subject/>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
          <subject/>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
          <subject/>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
          <subject/>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
          <subject/>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
          <subject/>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>STARTDATE</id>
          <enabled>Y</enabled>
          <name>STARTDATE</name>
        </field>
        <field>
          <id>ENDDATE</id>
          <enabled>Y</enabled>
          <name>ENDDATE</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>DEPDATE</id>
          <enabled>Y</enabled>
          <name>DEPDATE</name>
        </field>
        <field>
          <id>REPLAYDATE</id>
          <enabled>Y</enabled>
          <name>REPLAYDATE</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>Y</enabled>
          <name>LOG_FIELD</name>
        </field>
        <field>
          <id>EXECUTING_SERVER</id>
          <enabled>N</enabled>
          <name>EXECUTING_SERVER</name>
        </field>
        <field>
          <id>EXECUTING_USER</id>
          <enabled>N</enabled>
          <name>EXECUTING_USER</name>
        </field>
        <field>
          <id>CLIENT</id>
          <enabled>N</enabled>
          <name>CLIENT</name>
        </field>
      </trans-log-table>
      <perf-log-table>
        <connection/>
        <schema/>
        <table/>
        <interval/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>SEQ_NR</id>
          <enabled>Y</enabled>
          <name>SEQ_NR</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>INPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>INPUT_BUFFER_ROWS</name>
        </field>
        <field>
          <id>OUTPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>OUTPUT_BUFFER_ROWS</name>
        </field>
      </perf-log-table>
      <channel-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>LOGGING_OBJECT_TYPE</id>
          <enabled>Y</enabled>
          <name>LOGGING_OBJECT_TYPE</name>
        </field>
        <field>
          <id>OBJECT_NAME</id>
          <enabled>Y</enabled>
          <name>OBJECT_NAME</name>
        </field>
        <field>
          <id>OBJECT_COPY</id>
          <enabled>Y</enabled>
          <name>OBJECT_COPY</name>
        </field>
        <field>
          <id>REPOSITORY_DIRECTORY</id>
          <enabled>Y</enabled>
          <name>REPOSITORY_DIRECTORY</name>
        </field>
        <field>
          <id>FILENAME</id>
          <enabled>Y</enabled>
          <name>FILENAME</name>
        </field>
        <field>
          <id>OBJECT_ID</id>
          <enabled>Y</enabled>
          <name>OBJECT_ID</name>
        </field>
        <field>
          <id>OBJECT_REVISION</id>
          <enabled>Y</enabled>
          <name>OBJECT_REVISION</name>
        </field>
        <field>
          <id>PARENT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>PARENT_CHANNEL_ID</name>
        </field>
        <field>
          <id>ROOT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>ROOT_CHANNEL_ID</name>
        </field>
      </channel-log-table>
      <step-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>N</enabled>
          <name>LOG_FIELD</name>
        </field>
      </step-log-table>
      <metrics-log-table>
        <connection/>
        <schema/>
        <table/>
        <timeout_days/>
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>METRICS_DATE</id>
          <enabled>Y</enabled>
          <name>METRICS_DATE</name>
        </field>
        <field>
          <id>METRICS_CODE</id>
          <enabled>Y</enabled>
          <name>METRICS_CODE</name>
        </field>
        <field>
          <id>METRICS_DESCRIPTION</id>
          <enabled>Y</enabled>
          <name>METRICS_DESCRIPTION</name>
        </field>
        <field>
          <id>METRICS_SUBJECT</id>
          <enabled>Y</enabled>
          <name>METRICS_SUBJECT</name>
        </field>
        <field>
          <id>METRICS_TYPE</id>
          <enabled>Y</enabled>
          <name>METRICS_TYPE</name>
        </field>
        <field>
          <id>METRICS_VALUE</id>
          <enabled>Y</enabled>
          <name>METRICS_VALUE</name>
        </field>
      </metrics-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
    <created_user>-</created_user>
    <created_date>2017&#x2f;04&#x2f;04 17&#x3a;15&#x3a;02.970</created_date>
    <modified_user>-</modified_user>
    <modified_date>2017&#x2f;04&#x2f;04 17&#x3a;15&#x3a;02.970</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA&#x3d;</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
    <notepad>
      <note>This KTR imports the most recent &#x2f;transfer2&#x2f;receiving&#x2f;p2pe&#x2f;P2PE_device_report_YYYY-MM-DD.tsv&#xd;&#xa;file into auto_billing_staging.decryptx_device_day.&#xd;&#xa;&#xd;&#xa;The date embedded in the filename is always the date of the previous day - relative to the current date.&#xd;&#xa;The correct filename is derived in the derive_filename step.&#xd;&#xa;&#xa;23 Jul 2020&#xa;-----------&#xa;Lately there have been numerous cases in which a stray tab has been included in one or more columns in a row of the data file.&#xa;Since the file is tab-delimited, this causes teh import to fail.&#xa;The KTR has been updated to detect this condition and to write the offending records to an error file instead of trying to import the bad row.&#xa;&#xa;Algorithm&#x3a;&#xa;a.  A row should contain exactly 27 tab characters.  &#xa;b.  If a row has more than 27 tab characters then we will know that there is at least one stray tab in the file.&#xa;c.  The calculations step counts the number of tabs.&#xa;d.  The filter step &#x27;passes&#x27; only rows with 27 tabs&#x3b; the others are rejected and written to an error file.&#xa;</note>
      <xloc>16</xloc>
      <yloc>16</yloc>
      <width>863</width>
      <heigth>208</heigth>
      <fontname>Courier New</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>205</backgroundcolorgreen>
      <backgroundcolorblue>112</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
  <connection>
    <name>SUW_SRVR_14</name>
    <server>suw-srvr-14.capitalpayments.local</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>information_schema</database>
    <port>3306</port>
    <username>data_warehouse</username>
    <password>Encrypted 2be98afc86aa79088be1ca879d0adabcd</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>PRESERVE_RESERVED_WORD_CASE</code><attribute>Y</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_TIMESTAMP_DATA_TYPE</code><attribute>Y</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
    <hop>
      <from>get_report_date</from>
      <to>add_constants</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>replace_invalid_hyphens_in_zip_code</from>
      <to>get_report_date</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>define_filename_prefix_and_suffix_01</from>
      <to>derive_filename_01</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>derive_filename_01</from>
      <to>read_p2pe_device_rows_01</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>define_filename_prefix_and_suffix_02</from>
      <to>derive_filename_02</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>calculations_01</from>
      <to>filter_01</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>filter_01</from>
      <to>select_values_01</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>select_values_01</from>
      <to>sort_by_source_row_01</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>read_p2pe_device_rows_01</from>
      <to>calculations_01</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>sort_by_source_row_01</from>
      <to>join_02</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>sort_by_source_row_02</from>
      <to>join_02</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>filter_01</from>
      <to>select_values_for_error_file</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>select_values_for_error_file</from>
      <to>write_error_file_01</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>derive_filename_02</from>
      <to>read_p2pe_device_rows_02</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>read_p2pe_device_rows_02</from>
      <to>select_values_02</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>select_values_02</from>
      <to>replace_invalid_hyphens_in_zip_code</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>join_02</from>
      <to>select_values_04</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>select_values_04</from>
      <to>populate_decryptx_device_day</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>add_constants</from>
      <to>replace_empty_string_with_null</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>replace_empty_string_with_null</from>
      <to>sort_by_source_row_02</to>
      <enabled>Y</enabled>
    </hop>
  </order>
  <step>
    <name>add_constants</name>
    <type>Constant</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>date_created</name>
        <type>Timestamp</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>date_updated</name>
        <type>Timestamp</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>896</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>calculations_01</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>var first_tab_pos &#x3d; one_row.indexOf&#x28;&#x27;&#x5c;t&#x27;&#x29;&#x3b;               &#x2f;&#x2f; position of first tab char in one_row&#xa;var i&#x3b;&#xa;var num_tabs &#x3d; 0&#x3b;                                        &#x2f;&#x2f; number of tab characters appearing in one_row&#xa;var poi_device_id &#x3d; &#x27;&#x27;&#x3b;&#xa;&#xa;poi_device_id &#x3d; one_row.substring&#x28;0, first_tab_pos&#x29;&#x3b;     &#x2f;&#x2f; first &#x27;column&#x27; in one_row with column delimiter &#x3d; tab char&#xa;&#xa;for&#x28;i&#x3d;0&#x3b; i &#x3c; one_row.length&#x3b; i&#x2b;&#x2b;&#x29;&#x7b;&#xa;   if&#x28;one_row.charAt&#x28;i&#x29; &#x3d;&#x3d; &#x27;&#x5c;t&#x27;&#x29;&#x7b;&#xa;      num_tabs&#x2b;&#x2b;&#x3b;&#xa;   &#x7d;&#xa;&#x7d;</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>first_tab_pos</name>
        <rename>first_tab_pos</rename>
        <type>Integer</type>
        <length>9</length>
        <precision>0</precision>
        <replace>N</replace>
      </field>      <field>        <name>num_tabs</name>
        <rename>num_tabs</rename>
        <type>Number</type>
        <length>16</length>
        <precision>2</precision>
        <replace>N</replace>
      </field>      <field>        <name>poi_device_id</name>
        <rename>poi_device_id</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>608</xloc>
      <yloc>272</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>define_filename_prefix_and_suffix_01</name>
    <type>RowGenerator</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>prefix</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>&#x2f;transfer2&#x2f;receiving&#x2f;p2pe&#x2f;P2PE_device_report_</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>suffix</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>.tsv</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <limit>1</limit>
    <never_ending>N</never_ending>
    <interval_in_ms>5000</interval_in_ms>
    <row_time_field>now</row_time_field>
    <last_time_field>FiveSecondsAgo</last_time_field>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>112</xloc>
      <yloc>272</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>define_filename_prefix_and_suffix_02</name>
    <type>RowGenerator</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <name>prefix</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>&#x2f;transfer2&#x2f;receiving&#x2f;p2pe&#x2f;P2PE_device_report_</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>suffix</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>.tsv</nullif>
        <length>-1</length>
        <precision>-1</precision>
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <limit>1</limit>
    <never_ending>N</never_ending>
    <interval_in_ms>5000</interval_in_ms>
    <row_time_field>now</row_time_field>
    <last_time_field>FiveSecondsAgo</last_time_field>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>112</xloc>
      <yloc>368</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>derive_filename_01</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#x2f;&#x2a;&#xd;&#xa;   objective&#x3a;  calculate a filename which as a prefix, date component, and suffix&#xd;&#xa;               where the prefix and suffix are constants,&#xd;&#xa;               and the date component is a date of the format YYYY-MM-DD &#xd;&#xa;               and equal to the date of the previous day - relative to the current date.&#xd;&#xa;&#xd;&#xa;   example&#x3a;    suppose today&#x27;s date is 2020-03-20.  &#xd;&#xa;               the filename  we want is P2PE_device_report_2020-03-19.tsv.&#xd;&#xa;               &#xd;&#xa;               in this example, prefix &#x3d; &#x27;P2PE_device_report_&#x27; and suffix &#x3d; &#x27;tsv&#x27;.&#xd;&#xa;&#xd;&#xa;               the date component is yesterday&#x27;s date - relative to the current date.  &#xd;&#xa;&#x2a;&#x2f;&#xd;&#xa;&#xd;&#xa;var yesterday &#x3d; new Date&#x28;&#x29;&#x3b;                                 &#x2f;&#x2a; set yesterday &#x3d; today&#x27;s date               &#x2a;&#x2f;&#xd;&#xa;yesterday.setDate&#x28;yesterday.getDate&#x28;&#x29; - 1&#x29;&#x3b;                 &#x2f;&#x2a; subtract one day to get yesterday&#x27;s date   &#x2a;&#x2f;&#xd;&#xa;&#xd;&#xa;var source_file &#x3d; prefix                                    &#x2f;&#x2a; format the date the way we want it         &#x2a;&#x2f;&#xd;&#xa;               .concat&#x28;date2str&#x28;yesterday, &#x27;yyyy-MM-dd&#x27;&#x29;&#x29;&#xd;&#xa;               .concat&#x28;suffix&#x29;&#x3b;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>source_file</name>
        <rename>source_file</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>304</xloc>
      <yloc>272</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>derive_filename_02</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#x2f;&#x2a;&#xd;&#xa;   objective&#x3a;  calculate a filename which as a prefix, date component, and suffix&#xd;&#xa;               where the prefix and suffix are constants,&#xd;&#xa;               and the date component is a date of the format YYYY-MM-DD &#xd;&#xa;               and equal to the date of the previous day - relative to the current date.&#xd;&#xa;&#xd;&#xa;   example&#x3a;    suppose today&#x27;s date is 2020-03-20.  &#xd;&#xa;               the filename  we want is P2PE_device_report_2020-03-19.tsv.&#xd;&#xa;               &#xd;&#xa;               in this example, prefix &#x3d; &#x27;P2PE_device_report_&#x27; and suffix &#x3d; &#x27;tsv&#x27;.&#xd;&#xa;&#xd;&#xa;               the date component is yesterday&#x27;s date - relative to the current date.  &#xd;&#xa;&#x2a;&#x2f;&#xd;&#xa;&#xd;&#xa;var yesterday &#x3d; new Date&#x28;&#x29;&#x3b;                                 &#x2f;&#x2a; set yesterday &#x3d; today&#x27;s date               &#x2a;&#x2f;&#xd;&#xa;yesterday.setDate&#x28;yesterday.getDate&#x28;&#x29; - 1&#x29;&#x3b;                 &#x2f;&#x2a; subtract one day to get yesterday&#x27;s date   &#x2a;&#x2f;&#xd;&#xa;&#xd;&#xa;var source_file &#x3d; prefix                                      &#x2f;&#x2a; format the date the way we want it         &#x2a;&#x2f;&#xd;&#xa;               .concat&#x28;date2str&#x28;yesterday, &#x27;yyyy-MM-dd&#x27;&#x29;&#x29;&#xd;&#xa;               .concat&#x28;suffix&#x29;&#x3b;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>source_file</name>
        <rename>source_file</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>112</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>filter_01</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
<send_true_to>select_values_01</send_true_to>
<send_false_to>select_values_for_error_file</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>num_tabs</leftvalue>
 <function>&#x3d;</function>
 <rightvalue/>
 <value><name>constant</name><type>Number</type><text>27.0</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>&#x23;.&#x23;&#x3b;-&#x23;.&#x23;</mask></value> </condition>
    </compare>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>720</xloc>
      <yloc>272</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>get_report_date</name>
    <type>RegexEval</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <script><![CDATA[.*(\d{4}-\d{2}-\d{2}).*]]></script>    <matcher>source_file</matcher>
    <resultfieldname/>
    <usevar>N</usevar>
    <allowcapturegroups>Y</allowcapturegroups>
    <replacefields>N</replacefields>
    <canoneq>N</canoneq>
    <caseinsensitive>N</caseinsensitive>
    <comment>N</comment>
    <dotall>N</dotall>
    <multiline>N</multiline>
    <unicode>N</unicode>
    <unix>N</unix>
    <fields>
      <field>
        <name>report_date</name>
        <type>String</type>
        <format/>
        <group/>
        <decimal/>
        <length>-1</length>
        <precision>-1</precision>
        <nullif/>
        <ifnull/>
        <trimtype>none</trimtype>
        <currency/>
      </field>
    </fields>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>784</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>join_02</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
<join_type>INNER</join_type>
<step1>sort_by_source_row_01</step1>
<step2>sort_by_source_row_02</step2>
    <keys_1>
      <key>source_row</key>
    </keys_1>
    <keys_2>
      <key>source_row</key>
    </keys_2>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1232</xloc>
      <yloc>368</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>populate_decryptx_device_day</name>
    <type>TableOutput</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <connection>SUW_SRVR_14</connection>
    <schema>&#x24;&#x7b;dest_schema&#x7d;</schema>
    <table>&#x24;&#x7b;dest_table&#x7d;</table>
    <commit>1000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>poi_device_id</column_name>
          <stream_name>poi_device_id</stream_name>
        </field>
        <field>
          <column_name>poi_serial_number</column_name>
          <stream_name>poi_serial_number</stream_name>
        </field>
        <field>
          <column_name>device_name</column_name>
          <stream_name>device_name</stream_name>
        </field>
        <field>
          <column_name>product_name</column_name>
          <stream_name>product_name</stream_name>
        </field>
        <field>
          <column_name>partner_root_id</column_name>
          <stream_name>partner_root_id</stream_name>
        </field>
        <field>
          <column_name>partner_root_name</column_name>
          <stream_name>partner_root_name</stream_name>
        </field>
        <field>
          <column_name>partner_root_ccid</column_name>
          <stream_name>partner_root_ccid</stream_name>
        </field>
        <field>
          <column_name>partner_direct_id</column_name>
          <stream_name>partner_direct_id</stream_name>
        </field>
        <field>
          <column_name>partner_direct_name</column_name>
          <stream_name>partner_direct_name</stream_name>
        </field>
        <field>
          <column_name>partner_direct_ccid</column_name>
          <stream_name>partner_direct_ccid</stream_name>
        </field>
        <field>
          <column_name>custodian_id</column_name>
          <stream_name>custodian_id</stream_name>
        </field>
        <field>
          <column_name>custodian_name</column_name>
          <stream_name>custodian_name</stream_name>
        </field>
        <field>
          <column_name>custodian_ccid</column_name>
          <stream_name>custodian_ccid</stream_name>
        </field>
        <field>
          <column_name>location_id</column_name>
          <stream_name>location_id</stream_name>
        </field>
        <field>
          <column_name>location_name</column_name>
          <stream_name>location_name</stream_name>
        </field>
        <field>
          <column_name>location_addr</column_name>
          <stream_name>location_addr</stream_name>
        </field>
        <field>
          <column_name>location_city</column_name>
          <stream_name>location_city</stream_name>
        </field>
        <field>
          <column_name>location_state</column_name>
          <stream_name>location_state</stream_name>
        </field>
        <field>
          <column_name>location_zip</column_name>
          <stream_name>location_zip</stream_name>
        </field>
        <field>
          <column_name>state</column_name>
          <stream_name>state</stream_name>
        </field>
        <field>
          <column_name>last_state_change</column_name>
          <stream_name>last_state_change</stream_name>
        </field>
        <field>
          <column_name>activated_on</column_name>
          <stream_name>activated_on</stream_name>
        </field>
        <field>
          <column_name>shipped_on</column_name>
          <stream_name>shipped_on</stream_name>
        </field>
        <field>
          <column_name>source</column_name>
          <stream_name>source</stream_name>
        </field>
        <field>
          <column_name>decryption_count</column_name>
          <stream_name>decryption_count</stream_name>
        </field>
        <field>
          <column_name>decryptions_mtd</column_name>
          <stream_name>decryptions_mtd</stream_name>
        </field>
        <field>
          <column_name>decryptions_ytd</column_name>
          <stream_name>decryptions_ytd</stream_name>
        </field>
        <field>
          <column_name>source_row</column_name>
          <stream_name>source_row</stream_name>
        </field>
        <field>
          <column_name>source_file</column_name>
          <stream_name>source_file</stream_name>
        </field>
        <field>
          <column_name>report_date</column_name>
          <stream_name>report_date</stream_name>
        </field>
        <field>
          <column_name>date_created</column_name>
          <stream_name>date_created</stream_name>
        </field>
        <field>
          <column_name>date_updated</column_name>
          <stream_name>date_updated</stream_name>
        </field>
    </fields>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1408</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>read_p2pe_device_rows_01</name>
    <type>TextFileInput</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <accept_filenames>Y</accept_filenames>
    <passing_through_fields>N</passing_through_fields>
    <accept_field>source_file</accept_field>
    <accept_stepname>derive_filename_01</accept_stepname>
    <separator>&#x7e;</separator>
    <enclosure/>
    <enclosure_breaks>N</enclosure_breaks>
    <escapechar/>
    <header>Y</header>
    <nr_headerlines>1</nr_headerlines>
    <footer>N</footer>
    <nr_footerlines>1</nr_footerlines>
    <line_wrapped>N</line_wrapped>
    <nr_wraps>1</nr_wraps>
    <layout_paged>N</layout_paged>
    <nr_lines_per_page>80</nr_lines_per_page>
    <nr_lines_doc_header>0</nr_lines_doc_header>
    <noempty>Y</noempty>
    <include>N</include>
    <include_field>source_file</include_field>
    <rownum>Y</rownum>
    <rownumByFile>N</rownumByFile>
    <rownum_field>source_row</rownum_field>
    <format>mixed</format>
    <encoding/>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <file>
      <name>&#x2f;Users&#x2f;tsanders&#x2f;Desktop&#x2f;P2PE_device_report_2020-07-16.tsv</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
      <type>CSV</type>
      <compression>None</compression>
    </file>
    <filters>
    </filters>
    <fields>
      <field>
        <name>one_row</name>
        <type>None</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <ifnull/>
        <position>-1</position>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>both</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <error_ignored>N</error_ignored>
    <skip_bad_files>N</skip_bad_files>
    <file_error_field/>
    <file_error_message_field/>
    <error_line_skipped>Y</error_line_skipped>
    <error_count_field/>
    <error_fields_field/>
    <error_text_field/>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <date_format_lenient>Y</date_format_lenient>
    <date_format_locale>en_US</date_format_locale>
    <shortFileFieldName>source_file</shortFileFieldName>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>464</xloc>
      <yloc>272</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>read_p2pe_device_rows_02</name>
    <type>TextFileInput</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <accept_filenames>Y</accept_filenames>
    <passing_through_fields>N</passing_through_fields>
    <accept_field>source_file</accept_field>
    <accept_stepname>derive_filename_02</accept_stepname>
    <separator>	</separator>
    <enclosure>&#x22;</enclosure>
    <enclosure_breaks>N</enclosure_breaks>
    <escapechar/>
    <header>Y</header>
    <nr_headerlines>1</nr_headerlines>
    <footer>N</footer>
    <nr_footerlines>1</nr_footerlines>
    <line_wrapped>N</line_wrapped>
    <nr_wraps>1</nr_wraps>
    <layout_paged>N</layout_paged>
    <nr_lines_per_page>80</nr_lines_per_page>
    <nr_lines_doc_header>0</nr_lines_doc_header>
    <noempty>Y</noempty>
    <include>Y</include>
    <include_field>long_source_file</include_field>
    <rownum>Y</rownum>
    <rownumByFile>N</rownumByFile>
    <rownum_field>source_row</rownum_field>
    <format>mixed</format>
    <encoding/>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <file>
      <name>&#x2f;Users&#x2f;tsanders&#x2f;Desktop&#x2f;P2PE_device_report_2020-07-16.tsv</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
      <type>CSV</type>
      <compression>None</compression>
    </file>
    <filters>
    </filters>
    <fields>
      <field>
        <name>POI_Device_ID</name>
        <type>Integer</type>
        <format>&#x23;</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>POI_Serial_Number</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>10</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Product_Name</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>7</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>DeviceName</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>68</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Partner_Root_Id</name>
        <type>String</type>
        <format>&#x23;</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Partner_Root</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Partner_Direct_Id</name>
        <type>String</type>
        <format>&#x23;</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Partner_Direct</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Custodian_Id</name>
        <type>String</type>
        <format>&#x23;</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Custodian</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>16</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Location_Id</name>
        <type>String</type>
        <format>&#x23;</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Location</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>22</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Address</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>27</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>City</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>12</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>StateProvince</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>12</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Zip</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>10</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>State</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>10</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Last_State_Change</name>
        <type>String</type>
        <format>yyyy-MM-dd HH&#x3a;mm&#x3a;ss</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Activated_On</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>19</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Shipped_On</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>19</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Received_On</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>0</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Source</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>12</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Partner_Root_CCId</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Partner_Direct_CCId</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Custodian_CC_Id</name>
        <type>String</type>
        <format/>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Decryption_Count</name>
        <type>String</type>
        <format>&#x23;</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Decryptions_MTD</name>
        <type>String</type>
        <format>&#x23;</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
      <field>
        <name>Decryptions_YTD</name>
        <type>String</type>
        <format>&#x23;</format>
        <currency>&#x24;</currency>
        <decimal>.</decimal>
        <group>,</group>
        <nullif>-</nullif>
        <ifnull/>
        <position>-1</position>
        <length>15</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <error_ignored>N</error_ignored>
    <skip_bad_files>N</skip_bad_files>
    <file_error_field/>
    <file_error_message_field/>
    <error_line_skipped>N</error_line_skipped>
    <error_count_field/>
    <error_fields_field/>
    <error_text_field/>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <date_format_lenient>Y</date_format_lenient>
    <date_format_locale>en_US</date_format_locale>
    <shortFileFieldName>source_file</shortFileFieldName>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>272</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>replace_empty_string_with_null</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#x2f;&#x2a;&#xa;   The columns referenced below are declared as STRING in Pentaho but INT in MySQL.&#xa;   If any of the columns below have the empty string as its value,&#xa;   MySQL will reject it since it tries to store a string in an INT column.&#xa;   Therefore empty strings will be converted to NULL so MySQL will not fail &#xa;   with a datatype collision. &#xa;&#x2a;&#x2f;&#xa;&#xa;&#xa;function empty_string_to_null&#x28;str&#x29;&#x7b;&#xa;   if&#x28;str.length &#x3d;&#x3d; 0&#x29;&#x7b;&#xa;      return null&#x3b;&#xa;   &#x7d;else&#x7b;&#xa;      return str&#x3b;&#xa;   &#x7d;&#xa;&#x7d;&#xa;&#xa;var js_partner_root_id   &#x3d; empty_string_to_null&#x28;partner_root_id&#x29;&#x3b;&#xa;var js_partner_direct_id &#x3d; empty_string_to_null&#x28;partner_direct_id&#x29;&#x3b;&#xa;var js_custodian_id      &#x3d; empty_string_to_null&#x28;custodian_id&#x29;&#x3b;&#xa;var js_location_id       &#x3d; empty_string_to_null&#x28;location_id&#x29;&#x3b;&#xa;</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>js_partner_root_id</name>
        <rename>partner_root_id</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>js_partner_direct_id</name>
        <rename>partner_direct_id</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>js_custodian_id</name>
        <rename>custodian_id</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>js_location_id</name>
        <rename>location_id</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>    </fields>    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1056</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>replace_invalid_hyphens_in_zip_code</name>
    <type>ReplaceString</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>
      <field>
        <in_stream_name>location_zip</in_stream_name>
        <out_stream_name/>
        <use_regex>no</use_regex>
        <replace_string>&#xe2;&#x20ac;&#xfffd;</replace_string>
        <replace_by_string>-</replace_by_string>
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string/>
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>608</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>select_values_01</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>      <field>        <name>source_row</name>
      </field>      <field>        <name>one_row</name>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>880</xloc>
      <yloc>272</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>select_values_02</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>      <field>        <name>POI_Device_ID</name>
        <rename>poi_device_id</rename>
      </field>      <field>        <name>POI_Serial_Number</name>
        <rename>poi_serial_number</rename>
      </field>      <field>        <name>Product_Name</name>
        <rename>product_name</rename>
      </field>      <field>        <name>DeviceName</name>
        <rename>device_name</rename>
      </field>      <field>        <name>Partner_Root_Id</name>
        <rename>partner_root_id</rename>
      </field>      <field>        <name>Partner_Root</name>
        <rename>partner_root</rename>
      </field>      <field>        <name>Partner_Direct_Id</name>
        <rename>partner_direct_id</rename>
      </field>      <field>        <name>Partner_Direct</name>
        <rename>partner_direct</rename>
      </field>      <field>        <name>Custodian_Id</name>
        <rename>custodian_id</rename>
      </field>      <field>        <name>Custodian</name>
        <rename>custodian</rename>
      </field>      <field>        <name>Location_Id</name>
        <rename>location_id</rename>
      </field>      <field>        <name>Location</name>
        <rename>location</rename>
      </field>      <field>        <name>Address</name>
        <rename>location_addr</rename>
      </field>      <field>        <name>City</name>
        <rename>location_city</rename>
      </field>      <field>        <name>StateProvince</name>
        <rename>location_state</rename>
      </field>      <field>        <name>Zip</name>
        <rename>location_zip</rename>
      </field>      <field>        <name>State</name>
        <rename>state</rename>
      </field>      <field>        <name>Last_State_Change</name>
        <rename>last_state_change</rename>
      </field>      <field>        <name>Activated_On</name>
        <rename>activated_on</rename>
      </field>      <field>        <name>Shipped_On</name>
        <rename>shipped_on</rename>
      </field>      <field>        <name>Received_On</name>
        <rename>received_on</rename>
      </field>      <field>        <name>Source</name>
        <rename>source</rename>
      </field>      <field>        <name>Partner_Root_CCId</name>
        <rename>partner_root_ccid</rename>
      </field>      <field>        <name>Partner_Direct_CCId</name>
        <rename>partner_direct_ccid</rename>
      </field>      <field>        <name>Custodian_CC_Id</name>
        <rename>custodian_ccid</rename>
      </field>      <field>        <name>Decryption_Count</name>
        <rename>decryption_count</rename>
      </field>      <field>        <name>Decryptions_MTD</name>
        <rename>decryptions_mtd</rename>
      </field>      <field>        <name>Decryptions_YTD</name>
        <rename>decryptions_ytd</rename>
      </field>      <field>        <name>source_row</name>
      </field>      <field>        <name>source_file</name>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>432</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>select_values_04</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>      <field>        <name>poi_device_id</name>
      </field>      <field>        <name>poi_serial_number</name>
      </field>      <field>        <name>device_name</name>
      </field>      <field>        <name>product_name</name>
      </field>      <field>        <name>partner_root_id</name>
      </field>      <field>        <name>partner_root</name>
        <rename>partner_root_name</rename>
      </field>      <field>        <name>partner_root_ccid</name>
      </field>      <field>        <name>partner_direct_id</name>
      </field>      <field>        <name>partner_direct</name>
        <rename>partner_direct_name</rename>
      </field>      <field>        <name>partner_direct_ccid</name>
      </field>      <field>        <name>custodian_id</name>
      </field>      <field>        <name>custodian</name>
        <rename>custodian_name</rename>
      </field>      <field>        <name>custodian_ccid</name>
      </field>      <field>        <name>location_id</name>
      </field>      <field>        <name>location</name>
        <rename>location_name</rename>
      </field>      <field>        <name>location_addr</name>
      </field>      <field>        <name>location_city</name>
      </field>      <field>        <name>location_state</name>
      </field>      <field>        <name>location_zip</name>
      </field>      <field>        <name>state</name>
      </field>      <field>        <name>last_state_change</name>
      </field>      <field>        <name>activated_on</name>
      </field>      <field>        <name>shipped_on</name>
      </field>      <field>        <name>source</name>
      </field>      <field>        <name>decryption_count</name>
      </field>      <field>        <name>decryptions_mtd</name>
      </field>      <field>        <name>decryptions_ytd</name>
      </field>      <field>        <name>source_row</name>
      </field>      <field>        <name>source_file</name>
      </field>      <field>        <name>report_date</name>
      </field>      <field>        <name>date_created</name>
      </field>      <field>        <name>date_updated</name>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1408</xloc>
      <yloc>368</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>select_values_for_error_file</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <fields>      <field>        <name>source_file</name>
      </field>      <field>        <name>source_row</name>
      </field>      <field>        <name>one_row</name>
        <rename>file_row</rename>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>720</xloc>
      <yloc>352</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>sort_by_source_row_01</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
      <directory>&#x25;&#x25;java.io.tmpdir&#x25;&#x25;</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>source_row</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>0</collator_strength>
        <presorted>N</presorted>
      </field>
    </fields>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1232</xloc>
      <yloc>272</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>sort_by_source_row_02</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
      <directory>&#x25;&#x25;java.io.tmpdir&#x25;&#x25;</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>source_row</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>0</collator_strength>
        <presorted>N</presorted>
      </field>
    </fields>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1232</xloc>
      <yloc>464</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step>
    <name>write_error_file_01</name>
    <type>TextFileOutput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name/>
    </partitioning>
    <separator>&#x3b;</separator>
    <enclosure>&#x22;</enclosure>
    <enclosure_forced>N</enclosure_forced>
    <enclosure_fix_disabled>N</enclosure_fix_disabled>
    <header>Y</header>
    <footer>N</footer>
    <format>DOS</format>
    <compression>None</compression>
    <encoding>UTF-8</encoding>
    <endedLine/>
    <fileNameInField>N</fileNameInField>
    <fileNameField/>
    <create_parent_folder>Y</create_parent_folder>
    <file>
      <name>&#x2f;home&#x2f;svc-dbwh&#x2f;dir_errors_default&#x2f;decryptx_device_day_errors</name>
      <is_command>N</is_command>
      <servlet_output>N</servlet_output>
      <do_not_open_new_file_init>N</do_not_open_new_file_init>
      <extention>txt</extention>
      <append>N</append>
      <split>N</split>
      <haspartno>N</haspartno>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <add_to_result_filenames>Y</add_to_result_filenames>
      <pad>N</pad>
      <fast_dump>N</fast_dump>
      <splitevery>0</splitevery>
    </file>
    <fields>
      <field>
        <name>source_file</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>none</trim_type>
        <length>100</length>
        <precision>-1</precision>
      </field>
      <field>
        <name>source_row</name>
        <type>Integer</type>
        <format>&#x23;&#x3b;-&#x23;</format>
        <currency/>
        <decimal>.</decimal>
        <group>,</group>
        <nullif/>
        <trim_type>none</trim_type>
        <length>10</length>
        <precision>0</precision>
      </field>
      <field>
        <name>file_row</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <trim_type>both</trim_type>
        <length>-1</length>
        <precision>-1</precision>
      </field>
    </fields>
    <cluster_schema/>
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>880</xloc>
      <yloc>352</yloc>
      <draw>Y</draw>
    </GUI>
    </step>

  <step_error_handling>
      <error>
        <source_step>populate_decryptx_device_day</source_step>
        <target_step/>
        <is_enabled>Y</is_enabled>
        <nr_valuename>err_count</nr_valuename>
        <descriptions_valuename>err_description</descriptions_valuename>
        <fields_valuename>err_fieldname</fields_valuename>
        <codes_valuename>err_codes</codes_valuename>
        <max_errors>-1</max_errors>
        <max_pct_errors>-1</max_pct_errors>
        <min_pct_rows>-1</min_pct_rows>
      </error>
  </step_error_handling>
  <slave-step-copy-partition-distribution>
  </slave-step-copy-partition-distribution>
  <slave_transformation>N</slave_transformation>
</transformation>
